<div class="admin-container">
  <div class="admin-left">
    <div class="admin-section">
      <% @severities.each do |severity| %>
        <div class="name">
          <%= severity %>
        </div>
      <% end %>
    </div>
  </div>
  <div class="admin-stats admin-right">
    <div class="admin-station-incidents admin-section admin-small">
      <h4>Incidents by Station</h4>
      <% stations.each do |station| %>
        <div class="admin-station">
          <% unless station.station_incidents.count.zero? %>
            <div class="name">
              <% station.lines.each do |line| %>
                <span style="width: <%= 48 / station.lines.count %>px; background-color: <%= line.color %>; height: 12px;"></span>
              <% end %>
              <span style="margin-left: 6px;"><%= station.name %>: <%= station.station_incidents.count %></span>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="admin-line-incidents admin-section admin-small">
      <h4>Incidents by Line</h4>
      <% lines.each do |line| %>
        <div class="name">
          <span class="color" style="width: 48px; background-color: <%= line.color %>; height: 12px;"></span> <%= line.name %>: <%= line.incidents.count %>
        </div>
      <% end %>
    </div>
    <div class="admin-reasons admin-section admin-large" style="overflow:scroll; display:block">
      <h4>Reasons for delays</h4>
      <% reasons.each do |reason| %>
        <div class="name">
          <%= reason.incident_reasons.count %>x <%= truncate reason.content, length: 45 %>
        </div>
      <% end %>
    </div>
  </div>
</div>
